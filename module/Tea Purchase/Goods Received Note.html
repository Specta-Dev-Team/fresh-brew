<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goods Received Note | Custom Interface</title>

    <!-- Google Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Fresh Brew Design System -->
    <link rel="stylesheet" href="../../template/css/design-system.css">
    <link rel="stylesheet" href="../../template/css/components.css">

    <style>
        /* --- CUSTOM STYLES FOR GOODS RECEIVED NOTE --- */

        /* Custom wider card */
        .fb-glass-card {
            max-width: 1300px;
        }

        /* Override stepper layout */
        .fb-stepper {
            display: flex !important;
            justify-content: center !important;
            align-items: center !important;
            gap: 4rem !important;
            margin: 1.5rem 0 !important;
        }

        .fb-step {
            display: flex !important;
            align-items: center !important;
            gap: 0.75rem !important;
            cursor: pointer !important;
            opacity: 0.5 !important;
            transition: all 0.3s !important;
        }

        .fb-step.active {
            opacity: 1 !important;
        }

        .fb-step-icon {
            width: 36px !important;
            height: 36px !important;
            border-radius: 50% !important;
            background: #EEF2FF !important;
            border: 2px solid #E0E7FF !important;
            color: var(--primary) !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            font-weight: 600 !important;
            transition: all 0.3s !important;
        }

        .fb-step.active .fb-step-icon {
            background: var(--primary) !important;
            color: white !important;
            border-color: var(--primary) !important;
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3) !important;
        }

        .fb-step.completed .fb-step-icon {
            background: #C7D2FE !important;
            color: var(--primary) !important;
            border-color: #A5B4FC !important;
        }

        .fb-step-label {
            font-family: var(--font-main) !important;
            font-weight: 600 !important;
            font-size: 0.9rem !important;
            color: var(--secondary) !important;
            transition: all 0.3s !important;
        }

        .fb-step.active .fb-step-label {
            color: var(--text-main) !important;
        }

        /* Custom table min-width */
        .fb-table {
            min-width: 1800px;
        }

        /* Custom footer alignment */
        .fb-footer {
            justify-content: center;
            gap: 2rem;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid #F1F5F9;
        }

        .fb-footer .fb-btn {
            min-width: 180px;
            padding: 0.75rem 2rem;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.2s;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .fb-footer .fb-btn-secondary {
            background: white;
            border: 1px solid #E2E8F0;
            color: var(--text-main);
        }

        .fb-footer .fb-btn-secondary:hover {
            background: #F8FAFC;
            border-color: #CBD5E1;
        }

        .fb-footer .fb-btn-primary {
            background: var(--primary);
            border: 1px solid var(--primary);
            color: white;
            box-shadow: 0 4px 10px rgba(79, 70, 229, 0.2);
        }

        .fb-footer .fb-btn-primary:hover {
            background: var(--primary-hover);
            border-color: var(--primary-hover);
            transform: translateY(-1px);
            box-shadow: 0 6px 14px rgba(79, 70, 229, 0.3);
        }

        /* Step number styling */
        .step-number {
            font-size: 1rem;
            font-weight: 600;
        }

        .input-error {
            border-left: 3px solid #EF4444 !important;
        }
    </style>
</head>

<body>

    <div class="fb-wrapper">
        <div class="fb-glass-card">

            <!-- HEADER TITLE -->
            <div class="fb-header">
                <div class="fb-page-title" style="display: flex; align-items: center; gap: 1rem;">
                    <button class="fb-btn fb-btn-white" style="background:transparent; padding:0; min-width: unset; border: none;">
                        <span class="material-icons" style="font-size: 1.5rem; color: var(--secondary);">arrow_back</span>
                    </button>
                    <h1>Goods Received Note</h1>
                </div>
                <div class="fb-header-actions" style="display: flex; align-items: center; gap: 1rem;">
                    <button class="fb-btn fb-btn-white">
                        <span class="material-icons">search</span>
                    </button>
                    <button class="fb-btn fb-btn-white">
                        <span class="material-icons">menu</span>
                    </button>
                    <button class="fb-btn fb-btn-white">
                        <span class="material-icons">grid_view</span>
                    </button>
                </div>
            </div>

            <!-- STEPPER -->
            <div class="fb-stepper">
                <div class="fb-step active" onclick="activateStep(1)">
                    <div class="fb-step-icon">
                        <span class="step-number">1</span>
                    </div>
                    <div class="fb-step-label">Header</div>
                </div>
                <div class="fb-step" onclick="activateStep(2)">
                    <div class="fb-step-icon">
                        <span class="step-number">2</span>
                    </div>
                    <div class="fb-step-label">Item Particulars</div>
                </div>
                <div class="fb-step" onclick="activateStep(3)">
                    <div class="fb-step-icon">
                        <span class="step-number">3</span>
                    </div>
                    <div class="fb-step-label">Summary</div>
                </div>
            </div>

            <!-- FORM CONTENT -->
            <div id="step-1-content" class="fb-form-section">

                <!-- Row 1 -->
                <div class="fb-grid-4">
                    <div class="fb-form-group">
                        <label>GRN No.</label>
                        <input type="text" value="Auto" readonly style="background-color: #F8F9FA;">
                    </div>
                    <div class="fb-form-group">
                        <label class="required">GRN Date.</label>
                        <div style="position: relative;">
                            <input type="date" value="2026-02-11">
                        </div>
                    </div>
                    <div class="fb-form-group">
                        <label class="required">CP No.</label>
                        <select style="color: #94A3B8;">
                            <option value="">Select an option</option>
                        </select>
                    </div>
                    <div class="fb-form-group">
                        <label class="required">CP Date</label>
                        <input type="date">
                    </div>
                </div>

                <!-- Row 2 -->
                <div class="fb-grid-3">
                    <div class="fb-form-group">
                        <label class="required">LR No.</label>
                        <input type="text">
                    </div>
                    <div class="fb-form-group">
                        <label>Driver Name</label>
                        <input type="text">
                    </div>
                    <div class="fb-form-group">
                        <label>Cleaner Name</label>
                        <input type="text">
                    </div>
                </div>

                <!-- Row 3: Location & Charges -->
                <div class="fb-grid-3">
                    <div class="fb-form-group">
                        <label class="required">Location</label>
                        <select style="color: #94A3B8;">
                            <option value="">Select an option</option>
                        </select>
                    </div>
                    <div class="fb-form-group">
                        <label class="required">Sub Location</label>
                        <select style="color: #94A3B8;">
                            <option value="">Select an option</option>
                        </select>
                    </div>
                    <div class="fb-form-group">
                        <label>Tea Charges</label>
                        <input type="text">
                    </div>
                </div>

                <!-- Row 4: Worker Details (Moved to bottom) -->
                <div class="fb-form-group">
                    <label>Worker Details</label>
                    <input type="text">
                </div>
            </div>

            <!-- Item Particulars Content -->
            <div id="step-2-content" class="fb-form-section" style="display: none;">
                <div class="fb-table-container">
                    <table class="fb-table">
                            <thead>
                                <tr>
                                    <th style="width: 50px; text-align:center;">S.No</th>
                                    <th>PO No.</th>
                                    <th>Item Code</th>
                                    <th>Serial Box No.</th>
                                    <th>Garden</th>
                                    <th>Inv No</th>
                                    <th>Lot No</th>
                                    <th>Location</th>
                                    <th>Sub Location</th>
                                    <th style="text-align: right;">Ordered Bags</th>
                                    <th style="text-align: right;">Sample(Kg)</th>
                                    <th style="text-align: right;">Weight / Bag</th>
                                    <th style="text-align: right;">PO Qty</th>
                                    <th style="text-align: right;">Pending Qty</th>
                                    <th style="text-align: right;">Received Qty</th>
                                    <th style="text-align: right;">Received Bags</th>
                                    <th style="text-align: right;">Short Qty</th>
                                    <th style="text-align: right;">Excess Qty</th>
                                    <th style="text-align: right;">Expiry Date</th>
                                    <th style="width: 100px; text-align: center;">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="items_grid_body">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                </div>
                <div style="background: #F8FAFC; padding: 0.5rem 1rem; border-top: 1px solid #E2E8F0;">
                    <button class="fb-btn fb-btn-white fb-btn-sm" onclick="addItemRow()">
                        <span class="material-icons" style="font-size: 16px;">add</span> New
                    </button>
                </div>
            </div>

            <!-- Summary Content -->
            <div id="step-3-content" class="fb-form-section" style="display: none;">
                <!-- Totals Row -->
                <div class="fb-grid-2">
                    <div class="fb-form-group">
                        <label style="font-weight: bold; color: #333;">Tot. Rcd Bags</label>
                        <input type="text" placeholder="0.00" class="text-right"
                            style="color: #EF4444; font-weight: 600; background-color: #F8F9FA; border: 1px solid #E2E8F0;">
                    </div>
                    <div class="fb-form-group">
                        <label style="font-weight: bold; color: #333;">Tot. Rcd Weight (Kg)</label>
                        <input type="text" placeholder="0.00000" class="text-right"
                            style="color: #EF4444; font-weight: 600; background-color: #F8F9FA; border: 1px solid #E2E8F0;">
                    </div>
                </div>

                <!-- Remarks Row -->
                <div class="fb-form-group">
                    <label style="font-weight: bold; color: #333;">Remarks</label>
                    <textarea rows="5" placeholder="" style="resize: vertical;"></textarea>
                </div>
            </div>

            <!-- FOOTER -->
            <div class="fb-footer">
                <button class="fb-btn fb-btn-secondary" onclick="previousStep()">
                    Back
                </button>
                <button class="fb-btn fb-btn-primary" id="fb-footer-btn" onclick="nextStep()">
                    Continue
                </button>
            </div>

        </div>
    </div>

    <script>
        let currentStep = 1;

        function activateStep(stepIndex) {
            currentStep = stepIndex;
            updateUI();
        }

        function nextStep() {
            if (currentStep < 3) {
                currentStep++;
                updateUI();
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                updateUI();
            }
        }

        function updateUI() {
            // Update Stepper
            document.querySelectorAll('.fb-step').forEach((step, index) => {
                const stepNumber = index + 1;
                const isActive = stepNumber === currentStep;
                const isCompleted = stepNumber < currentStep;
                
                step.classList.remove('active', 'completed');
                if (isActive) step.classList.add('active');
                else if (isCompleted) step.classList.add('completed');
                
                const icon = step.querySelector('.fb-step-icon');
                if (isCompleted) {
                    icon.innerHTML = '<span class="material-icons" style="font-size: 1.2rem;">check</span>';
                } else {
                    icon.innerHTML = `<span class="step-number">${stepNumber}</span>`;
                }
            });

            // Update Content Visibility
            document.getElementById('step-1-content').style.display = currentStep === 1 ? 'flex' : 'none';
            document.getElementById('step-2-content').style.display = currentStep === 2 ? 'flex' : 'none';
            document.getElementById('step-3-content').style.display = currentStep === 3 ? 'flex' : 'none';

            // Update Footer Button Text
            const btn = document.getElementById('fb-footer-btn');
            btn.innerText = currentStep === 3 ? 'Submit' : 'Continue';
        }

        // Initialize grid logic
        window.addItemRow = function () {
            const tbody = document.getElementById('items_grid_body');
            const rowCount = tbody.querySelectorAll('tr').length + 1;
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td style="text-align:center; color:var(--secondary);">${rowCount}</td>
                <td><input type="text" placeholder="PO No."></td>
                <td><input type="text" placeholder="Item Code"></td>
                <td><input type="text" placeholder="Serial Box No."></td>
                <td><input type="text" placeholder="Garden"></td>
                <td><input type="text" placeholder="Inv No"></td>
                <td><input type="text" placeholder="Lot No"></td>
                <td><input type="text" placeholder="Location"></td>
                <td><input type="text" placeholder="Sub Location"></td>
                <td><input type="text" class="text-right" placeholder="0.00"></td>
                <td><input type="text" class="text-right" placeholder="0.000000"></td>
                <td><input type="text" class="text-right" placeholder="0.000000"></td>
                <td><input type="text" class="text-right" placeholder="0.000"></td>
                <td><input type="text" class="text-right" placeholder="0.0000"></td>
                <td><input type="text" class="text-right" placeholder="0.000000"></td>
                <td><input type="text" class="text-right" placeholder="0.00"></td>
                <td><input type="text" class="text-right" placeholder="0.0000"></td>
                <td><input type="text" class="text-right" placeholder="0.00000"></td>
                <td><input type="date"></td>
                <td style="text-align: center;">
                    <button class="fb-btn fb-btn-white" style="padding: 0.2rem 1rem; font-size: 0.75rem; min-width: 60px; border-radius: 4px;">OK</button>
                    <button style="background:none; border:none; color:#EF4444; cursor:pointer;" onclick="this.closest('tr').remove()">
                        <span class="material-icons" style="font-size:18px;">delete</span>
                    </button>
                </td>
            `;
            tbody.appendChild(tr);
        }

        // Add initial row
        addItemRow();

    </script>
</body>

</html>
```